---
# MinIO Pod Basics
minio_pod_name: "minio"
minio_pod_manifest_path: "/etc/podman/pods/minio.yml"
minio_data_dir: "/srv/minio/data"
minio_host_data_dir: "{{ minio_data_dir }}"
minio_config_dir: "/srv/minio/config"
minio_cert_dir: "/srv/minio/certs"
minio_image: "quay.io/minio/minio:latest"
minio_run_as_user: 1000
minio_run_as_group: 1000
minio_container_name: "{{ minio_pod_name }}-minio"
minio_container_data_dir: "/data"
minio_container_config_dir: "/root/.minio"
minio_container_certs_dir: "/root/.minio/certs"
minio_expected_uid: "{{ minio_run_as_user }}"
minio_expected_gid: "{{ minio_run_as_group }}"
minio_expected_mode: "0700"
minio_selinux_relabel: false
minio_install_packages: true

# Network
minio_port: 9000
minio_console_port: 9001
minio_api_scheme: "http"
minio_host_ip: >-
  {{
    ansible_default_ipv4.address
      | default(ansible_all_ipv4_addresses[0] | default('127.0.0.1'))
  }}
minio_api_url: ""
minio_console_url: ""
minio_health_url: ""
minio_validate_certs: true

# Credentials and server settings
minio_root_user: "{{ lookup('env', 'MINIO_ROOT_USER') | default('', true) }}"
minio_root_password: "{{ lookup('env', 'MINIO_ROOT_PASSWORD') | default('', true) }}"
minio_region: ""
minio_server_url: ""
minio_browser_redirect_url: ""
minio_env_extra: {}
minio_extra_args: []

# Systemd
minio_systemd_unit_name: >-
  {{
    'podman-kube@'
    ~ (minio_pod_manifest_path | basename | regex_replace('\\.yml$', ''))
    ~ '.service'
  }}
minio_manage_systemd: true
minio_skip_runtime: false
minio_skip_deploy: false
minio_skip_bootstrap: false
minio_skip_config: false
minio_skip_validate: false

# Bootstrap
minio_bootstrap_buckets: []

# Config
minio_config_users: []
minio_mc_path: "mc"
minio_mc_alias: "minio"
minio_mc_insecure: false

# Backup/Restore
minio_backup_action: "none"
minio_backup_dir: "/srv/minio/backups"
minio_backup_retention_keep_last: 14
minio_backup_stop_service: true
minio_restore_source: ""
minio_restore_confirm: ""
minio_backup_validate_after_restore: true

# Ops
minio_ops_action: "none"
minio_ops_target_image: ""

# Validate
minio_validate_mode: "fail"
